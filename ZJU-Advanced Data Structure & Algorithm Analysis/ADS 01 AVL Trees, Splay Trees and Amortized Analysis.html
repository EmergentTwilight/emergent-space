
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Emergent Space">
      
      
        <meta name="author" content="Emergent Twilight">
      
      
        <link rel="canonical" href="https://note.emergenttwilight.top/ZJU-Advanced%20Data%20Structure%20%26%20Algorithm%20Analysis/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis.html">
      
      
        <link rel="prev" href="index.html">
      
      
        <link rel="next" href="ADS%2002%20Red-Black%20Trees%20and%20B%2B%20Trees.html">
      
      
      <link rel="icon" href="../__srcs/images/logo-E.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>01 AVL Trees, Splay Trees and Amortized Analysis - Emergent Space</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../__srcs/css/banner.css">
    
      <link rel="stylesheet" href="../__srcs/css/sidebar.css">
    
      <link rel="stylesheet" href="../__srcs/css/content.css">
    
      <link rel="stylesheet" href="../__srcs/css/custom.css">
    
      <link rel="stylesheet" href="../__srcs/css/font.css">
    
      <link rel="stylesheet" href="../__srcs/css/list_callouts.css">
    
      <link rel="stylesheet" href="../__srcs/css/friend_link.css">
    
      <link rel="stylesheet" href="../__srcs/css/footer.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-avl-trees-self-balancing-tree" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Emergent Space" class="md-header__button md-logo" aria-label="Emergent Space" data-md-component="logo">
      
  <img src="../__srcs/images/logo-gaussian-small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Emergent Space
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              01 AVL Trees, Splay Trees and Amortized Analysis
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/EmergentTwilight/emergent-space/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    emergent-space
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index.html" class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../index/dsalgo/index.html" class="md-tabs__link">
          
  
    
  
  DS/Algo.

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index/codinglang/index.html" class="md-tabs__link">
          
  
    
  
  Coding/Lang.

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index/system/index.html" class="md-tabs__link">
          
  
    
  
  System

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index/graphics/index.html" class="md-tabs__link">
          
  
    
  
  Graphics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index/others/index.html" class="md-tabs__link">
          
  
    
  
  Others

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Emergent Space" class="md-nav__button md-logo" aria-label="Emergent Space" data-md-component="logo">
      
  <img src="../__srcs/images/logo-gaussian-small.png" alt="logo">

    </a>
    Emergent Space
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EmergentTwilight/emergent-space/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    emergent-space
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Home
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../index/dsalgo/index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    DS/Algo.
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            DS/Algo.
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../ZJU-Fundamentals%20of%20Data%20Structures/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Fundamentals of Data Structures
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced Data Structure & Algorithm Analysis
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Advanced Data Structure & Algorithm Analysis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    01 AVL Trees, Splay Trees and Amortized Analysis
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    01 AVL Trees, Splay Trees and Amortized Analysis
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-avl-trees-self-balancing-tree" class="md-nav__link">
    <span class="md-ellipsis">
      1 AVL Trees: Self-Balancing Tree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 AVL Trees: Self-Balancing Tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-definition" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-solution" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 Solution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2 Solution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-rr-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.1 RR rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.2 rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-lr-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.3 LR rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124-rl-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.4 RL rotation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-one-last-question" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 One last question
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-splay-trees-self-adjusting-tree" class="md-nav__link">
    <span class="md-ellipsis">
      2 Splay Trees: Self-Adjusting Tree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Splay Trees: Self-Adjusting Tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-amortized-time-complexity-均摊时间复杂度" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Amortized Time Complexity 均摊时间复杂度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-solution" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Solution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 Solution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-多次-single_rotate-为什么不行" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 多次 single_rotate 为什么不行？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-zig-zag-zig-zig-zig" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2 { Zig-zag, Zig-zig, Zig }
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-insertion" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.3 Insertion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-deletion" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.4 Deletion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-advantage" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Advantage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-amortized-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      3 Amortized Analysis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Amortized Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-aggregate-analysis-聚合分析" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Aggregate analysis 聚合分析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Aggregate analysis 聚合分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-eg-stach-with-multipop" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 e.g. Stach with MultiPop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-accounting-method-核算法" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Accounting method 核算法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Accounting method 核算法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-eg-stack-with-multipop" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.1 e.g. Stack with MultiPop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-potential-method-势能法" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Potential method 势能法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 Potential method 势能法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-势能函数" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.1 势能函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-eg-stack-with-multipop" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.2 e.g. Stack with MultiPop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333-splay-trees-t_amortizedolog-n" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.3 Splay Trees: \(T_{amortized}=O(\log N)\)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-questions" class="md-nav__link">
    <span class="md-ellipsis">
      4 Questions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 Questions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-hw1" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 HW1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 HW1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-给定-avl-树高求最小节点数" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.1 给定 AVL 树高，求最小节点数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412-熟练进行-splay" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.2 熟练进行 Splay
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#413-选择合适的势能函数" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.3 选择合适的势能函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#414-编程题avl-tree-插入实现" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.4 编程题：AVL Tree 插入实现
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-ex1" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Ex1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Ex1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-amortized-bounds-weakerstronger" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1 Amortized bounds weaker/stronger?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-初始非零的势能函数" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2 初始非零的势能函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423-avl-tree-高度和节点数关系" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.3 AVL Tree 高度和节点数关系
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#424-平衡树性质判断" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.4 平衡树性质判断
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#425-avl-tree-插入操作" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.5 AVL Tree 插入操作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#426-一些正误判断" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.6 一些正误判断
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-midterm" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Midterm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Midterm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-splay-tree-插入操作" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1 Splay tree 插入操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2002%20Red-Black%20Trees%20and%20B%2B%20Trees.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02 Red-Black Trees and B+ Trees
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2003%20Inverted%20File%20Index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03 Inverted File Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2004%20Leftist%20Heaps%20and%20Skew%20Heaps.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04 Leftistf Heaps and Skew Heaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2005%20Binomial%20Queue.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 Binomial Queue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2006%20Backtracking.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 Backtracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2007%20Divide%20and%20Conquer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 Divide and Conquer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2008%20Dynamic%20Programming.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2009%20Greedy%20Algorithm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 Greedy Algorithm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2010%20NP-Completeness.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10 NP-Completeness
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2011%20Approximation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11 Approximation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2012%20Local%20Search.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12 Local Search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2013%20Randomized%20Algorithms.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13 Randomized Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2014%20Parallel%20Algorithms.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14 Parallel Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%2015%20External%20Sorting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15 External Sorting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%20Cheat%20Sheet.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Final Cheat Sheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%20Cheat%20Sheet%20Dynamic%20Programming.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Final DP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS%20Final%20Questions.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Final Questions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../index/codinglang/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Coding/Lang.
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../index/system/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    System
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../index/graphics/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Graphics
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../index/others/index.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Others
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-avl-trees-self-balancing-tree" class="md-nav__link">
    <span class="md-ellipsis">
      1 AVL Trees: Self-Balancing Tree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 AVL Trees: Self-Balancing Tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-definition" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-solution" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 Solution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2 Solution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#121-rr-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.1 RR rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#122-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.2 rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#123-lr-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.3 LR rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#124-rl-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      1.2.4 RL rotation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-one-last-question" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 One last question
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-splay-trees-self-adjusting-tree" class="md-nav__link">
    <span class="md-ellipsis">
      2 Splay Trees: Self-Adjusting Tree
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Splay Trees: Self-Adjusting Tree">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-amortized-time-complexity-均摊时间复杂度" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Amortized Time Complexity 均摊时间复杂度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-solution" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Solution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 Solution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-多次-single_rotate-为什么不行" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 多次 single_rotate 为什么不行？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-zig-zag-zig-zig-zig" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.2 { Zig-zag, Zig-zig, Zig }
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-insertion" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.3 Insertion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#224-deletion" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.4 Deletion
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-advantage" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Advantage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-amortized-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      3 Amortized Analysis
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Amortized Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-aggregate-analysis-聚合分析" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Aggregate analysis 聚合分析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Aggregate analysis 聚合分析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#311-eg-stach-with-multipop" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 e.g. Stach with MultiPop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-accounting-method-核算法" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Accounting method 核算法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Accounting method 核算法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321-eg-stack-with-multipop" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.1 e.g. Stack with MultiPop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-potential-method-势能法" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 Potential method 势能法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 Potential method 势能法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#331-势能函数" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.1 势能函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#332-eg-stack-with-multipop" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.2 e.g. Stack with MultiPop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#333-splay-trees-t_amortizedolog-n" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.3 Splay Trees: \(T_{amortized}=O(\log N)\)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-questions" class="md-nav__link">
    <span class="md-ellipsis">
      4 Questions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 Questions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-hw1" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 HW1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 HW1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#411-给定-avl-树高求最小节点数" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.1 给定 AVL 树高，求最小节点数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#412-熟练进行-splay" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.2 熟练进行 Splay
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#413-选择合适的势能函数" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.3 选择合适的势能函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#414-编程题avl-tree-插入实现" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.4 编程题：AVL Tree 插入实现
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-ex1" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Ex1
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Ex1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#421-amortized-bounds-weakerstronger" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1 Amortized bounds weaker/stronger?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#422-初始非零的势能函数" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2 初始非零的势能函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#423-avl-tree-高度和节点数关系" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.3 AVL Tree 高度和节点数关系
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#424-平衡树性质判断" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.4 平衡树性质判断
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#425-avl-tree-插入操作" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.5 AVL Tree 插入操作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#426-一些正误判断" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.6 一些正误判断
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-midterm" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Midterm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Midterm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#431-splay-tree-插入操作" class="md-nav__link">
    <span class="md-ellipsis">
      4.3.1 Splay tree 插入操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/EmergentTwilight/emergent-space/edit/master/docs/ZJU-Advanced Data Structure & Algorithm Analysis/ADS 01 AVL Trees, Splay Trees and Amortized Analysis.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/EmergentTwilight/emergent-space/raw/master/docs/ZJU-Advanced Data Structure & Algorithm Analysis/ADS 01 AVL Trees, Splay Trees and Amortized Analysis.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>01 AVL Trees, Splay Trees and Amortized Analysis</h1>

<h2 id="1-avl-trees-self-balancing-tree">1 AVL Trees: Self-Balancing Tree<a class="headerlink" href="#1-avl-trees-self-balancing-tree" title="Locate to heading">#</a></h2>
<ul>
<li>Target<ul>
<li>让二叉树的 height 尽量小</li>
<li>减少 Average Search Time</li>
</ul>
</li>
</ul>
<h3 id="11-definition">1.1 Definition<a class="headerlink" href="#11-definition" title="Locate to heading">#</a></h3>
<ul>
<li>空树平衡</li>
<li>非空树平衡当且仅当<ul>
<li>左右子树均平衡</li>
<li>左右子树的高度相差 <span class="arithmatex">\(\le 1\)</span></li>
</ul>
</li>
</ul>
<p>Balance Factor <span class="arithmatex">\(BF(node) = h_L-h_R\)</span></p>
<h3 id="12-solution">1.2 Solution<a class="headerlink" href="#12-solution" title="Locate to heading">#</a></h3>
<ul>
<li><strong>Trouble Maker</strong>: 插入之后导致不平衡的节点</li>
<li><strong>Trouble Finder</strong>: 探测到产生了不平衡的节点</li>
<li>四种调整情况：RR/LL LR/RL<ul>
<li>反映的是 Trouble finder 到 Trouble maker 的相对位置关系</li>
</ul>
</li>
</ul>
<h4 id="121-rr-rotation">1.2.1 RR rotation<a class="headerlink" href="#121-rr-rotation" title="Locate to heading">#</a></h4>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028011829527.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028011829527.webp" /></p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RR rotate</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">avl_ptr</span><span class="w"> </span><span class="nf">single_rotate_right</span><span class="p">(</span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">P</span><span class="p">){</span><span class="w">  </span><span class="c1">// N is the rotation center</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="n">N</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P</span><span class="p">;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">P</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">),</span><span class="w"> </span><span class="n">height</span><span class="p">(</span><span class="n">P</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="n">N</span><span class="o">-&gt;</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">N</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">),</span><span class="w"> </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">N</span><span class="p">;</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="p">}</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="n">avl_ptr</span><span class="w"> </span><span class="nf">rr_rotate</span><span class="p">(</span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">trouble_finder</span><span class="p">){</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">single_rotate_right</span><span class="p">(</span><span class="n">trouble_finder</span><span class="p">);</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="p">}</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="n">rr_rotate</span><span class="p">(</span><span class="n">Mar</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="122-rotation">1.2.2 rotation<a class="headerlink" href="#122-rotation" title="Locate to heading">#</a></h4>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028011705480.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028011705480.webp" /></p>
<ul>
<li>插入 Apr 后，发现 grandparent 产生了不平衡，于是需要对 Mar 进行 rotate</li>
</ul>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">LL rotate</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">avl_ptr</span><span class="w"> </span><span class="nf">single_rotate_left</span><span class="p">(</span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">P</span><span class="p">){</span><span class="w">  </span><span class="c1">// rotation to replace the parent node</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">;</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="n">N</span><span class="o">-&gt;</span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">P</span><span class="p">;</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">P</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span><span class="w"> </span><span class="n">height</span><span class="p">(</span><span class="n">P</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="n">N</span><span class="o">-&gt;</span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">(</span><span class="n">height</span><span class="p">(</span><span class="n">N</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">),</span><span class="w"> </span><span class="n">P</span><span class="o">-&gt;</span><span class="n">height</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">N</span><span class="p">;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="p">}</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="n">avl_ptr</span><span class="w"> </span><span class="nf">ll_rotate</span><span class="p">(</span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">trouble_finder</span><span class="p">){</span><span class="w">  </span><span class="c1">// first trouble finder</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">single_rotate_left</span><span class="p">(</span><span class="n">trouble_finder</span><span class="p">);</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="p">}</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13"></a>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="n">ll_rotate</span><span class="p">(</span><span class="n">Mar</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="123-lr-rotation">1.2.3 LR rotation<a class="headerlink" href="#123-lr-rotation" title="Locate to heading">#</a></h4>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028011854844.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028011854844.webp" /></p>
<p>可以分成以下步骤</p>
<ol>
<li><code>P</code> 进行 <code>single_rotate_right</code></li>
<li><code>G</code> 进行 <code>single_rotate_left</code>，这里的 <code>G</code> 也就是 <code>trouble_finder</code></li>
</ol>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">LR rotate</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span>
<span class="normal"><a href="#__codelineno-2-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">avl_ptr</span><span class="w"> </span><span class="nf">lr_rotate</span><span class="p">(</span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">trouble_finder</span><span class="p">){</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="n">trouble_finder</span><span class="o">-&gt;</span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">single_rotate_right</span><span class="p">(</span><span class="n">trouble_finder</span><span class="o">-&gt;</span><span class="n">left</span><span class="p">);</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">single_rotate_left</span><span class="p">(</span><span class="n">trouble_finder</span><span class="p">);</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="p">}</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="n">lr_rotate</span><span class="p">(</span><span class="n">May</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<h4 id="124-rl-rotation">1.2.4 RL rotation<a class="headerlink" href="#124-rl-rotation" title="Locate to heading">#</a></h4>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028011911238.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028011911238.webp" /></p>
<div class="language-c highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">RL rotate</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">avl_ptr</span><span class="w"> </span><span class="nf">rl_rotate</span><span class="p">(</span><span class="n">avl_ptr</span><span class="w"> </span><span class="n">trouble_finder</span><span class="p">){</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="n">trouble_finder</span><span class="o">-&gt;</span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">single_rotate_left</span><span class="p">(</span><span class="n">trouble_finder</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">single_rotate_right</span><span class="p">(</span><span class="n">trouble_finder</span><span class="o">-&gt;</span><span class="n">right</span><span class="p">);</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="p">}</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="n">rl_rotate</span><span class="p">(</span><span class="n">May</span><span class="p">);</span>
</span></code></pre></div></td></tr></table></div>
<div class="admonition tip">
<p class="admonition-title">总结</p>
<ul>
<li>永远只找第一个 Trouble Finder，<em>这也符合递归的遍历结构</em></li>
<li>RR 和 LL 只用转一次，而 RL 和 LR 都需要转两次</li>
<li>为了维护树的结构，<del>在 rotate 时需要记录 <code>trouble_finder</code> 的 <code>parent</code>（若有），并及时更新指针</del>，<em><code>single_rotate</code> 函数均会返回 rotate 后的子树根节点，所以很好实现</em></li>
</ul>
</div>
<h3 id="13-one-last-question">1.3 One last question<a class="headerlink" href="#13-one-last-question" title="Locate to heading">#</a></h3>
<p>给定 height 的 AVL Tree 的最少节点数：</p>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028011948468.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028011948468.webp" /></p>
<div class="arithmatex">\[
n_h=n_{h-1}+n_{h-2}+1
\]</div>
<p>由此可以推导出：<strong>必记公式</strong></p>
<div class="arithmatex">\[
n_h=F_{h+3}-1
\]</div>
<p>也就是：</p>
<div class="arithmatex">\[
\begin{align}
n_h&amp;\approx\frac{1}{\sqrt{5}}(\frac{1+\sqrt{5}}{2})^{h+3}-1 \\ \\
h&amp;=O(\ln n)
\end{align}
\]</div>
<p>这说明了 AVL Tree 的平衡性。</p>
<div class="admonition warning">
<p class="admonition-title">Attention</p>
<p>课本中对 height 没有统一的定义，这里认为根节点的高度为 0，边才能提供高度</p>
</div>
<h2 id="2-splay-trees-self-adjusting-tree">2 Splay Trees: Self-Adjusting Tree<a class="headerlink" href="#2-splay-trees-self-adjusting-tree" title="Locate to heading">#</a></h2>
<ul>
<li>Target: Any <span class="arithmatex">\(M\)</span> consecutive tree operations starting <strong>from an empty</strong> tree take at most <span class="arithmatex">\(O(M\log N)\)</span> time.</li>
<li>为了降低 amortized time，由于存在 <span class="arithmatex">\(O(N)\)</span> 的访问请求，不能让这个请求每次都是 <span class="arithmatex">\(O(N)\)</span>，所以要移动节点。</li>
<li><strong>只要查询一个节点，就放到根上面去</strong>。</li>
</ul>
<h3 id="21-amortized-time-complexity-均摊时间复杂度">2.1 Amortized Time Complexity 均摊时间复杂度<a class="headerlink" href="#21-amortized-time-complexity-均摊时间复杂度" title="Locate to heading">#</a></h3>
<ul>
<li>Worst Bound: <span class="arithmatex">\(W(C)=O(N)\)</span><ul>
<li>好算但没用</li>
</ul>
</li>
<li>Amoritzed Bound: <span class="arithmatex">\(A(C)=\sum_{i=1}^M c_i\)</span><ul>
<li>蒙特卡洛</li>
<li>可计算、有意义</li>
</ul>
</li>
<li>Average Bound: <span class="arithmatex">\(E(C)=\int P(c) \cdot c dc\)</span><ul>
<li>有意义难计算</li>
</ul>
</li>
</ul>
<h3 id="22-solution">2.2 Solution<a class="headerlink" href="#22-solution" title="Locate to heading">#</a></h3>
<h4 id="221-多次-single_rotate-为什么不行">2.2.1 多次 <code>single_rotate</code> 为什么不行？<a class="headerlink" href="#221-多次-single_rotate-为什么不行" title="Locate to heading">#</a></h4>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028012006178.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028012006178.webp" /></p>
<h4 id="222-zig-zag-zig-zig-zig">2.2.2 { Zig-zag, Zig-zig, Zig }<a class="headerlink" href="#222-zig-zag-zig-zig-zig" title="Locate to heading">#</a></h4>
<div class="admonition warning">
<p class="admonition-title">Attention</p>
<p>这里的 zig-zig 被认为是 <em>single rotation</em>，但事实上使用了两次 AVL rotations</p>
</div>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028012027625.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028012027625.webp" /></p>
<div class="admonition tip">
<p class="admonition-title">Hint</p>
<p>Splaying not only moves the accessed node to the root, but also <strong>roughly halves the depth of most nodes on the path</strong>. 所以 Splay Tree 也是平衡树</p>
</div>
<h4 id="223-insertion">2.2.3 Insertion<a class="headerlink" href="#223-insertion" title="Locate to heading">#</a></h4>
<ol>
<li>Find 是否已经存在<ol>
<li>如果不存在，按照 BST 插入</li>
</ol>
</li>
<li>splay 这个元素所在的节点到根</li>
</ol>
<h4 id="224-deletion">2.2.4 Deletion<a class="headerlink" href="#224-deletion" title="Locate to heading">#</a></h4>
<ol>
<li>Find(x), <em>x will be the root</em></li>
<li>Remove x, <em>get 2 subtrees <span class="arithmatex">\(T_L\)</span> and  <span class="arithmatex">\(T_R\)</span></em></li>
<li>FindMax(<span class="arithmatex">\(T_L\)</span>), <em>max element will be the root</em></li>
<li>Make <span class="arithmatex">\(T_R\)</span> the right child of the root of <span class="arithmatex">\(T_L\)</span></li>
</ol>
<h3 id="23-advantage">2.3 Advantage<a class="headerlink" href="#23-advantage" title="Locate to heading">#</a></h3>
<ul>
<li>存储空间小一些（不需要记录 <span class="arithmatex">\(BF\)</span> ）</li>
</ul>
<h2 id="3-amortized-analysis">3 Amortized Analysis<a class="headerlink" href="#3-amortized-analysis" title="Locate to heading">#</a></h2>
<p><strong>Target</strong>: Any M consecutive operations take at most <span class="arithmatex">\(O(M\log N)\)</span>  time.</p>
<p>strength: worst-case bound <span class="arithmatex">\(\ge\)</span> amortized bound <em>Probablity not involved</em> <span class="arithmatex">\(\ge\)</span> average-case bound</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>但是 amortized 结果可能比 average 要小</p>
</div>
<h3 id="31-aggregate-analysis-聚合分析">3.1 Aggregate analysis 聚合分析<a class="headerlink" href="#31-aggregate-analysis-聚合分析" title="Locate to heading">#</a></h3>
<p>对于所有 <span class="arithmatex">\(n\)</span>，连续的 <span class="arithmatex">\(n\)</span> 个操作总共花费的最坏时间为 <span class="arithmatex">\(T(n)\)</span>，那么 amortized cost 为：</p>
<div class="arithmatex">\[T_{amortized}=T(n)/n\]</div>
<h4 id="311-eg-stach-with-multipop">3.1.1 e.g. Stach with <code>MultiPop</code><a class="headerlink" href="#311-eg-stach-with-multipop" title="Locate to heading">#</a></h4>
<p>从空栈开始连续进行 <span class="arithmatex">\(n\)</span> 个 {<code>push</code>, <code>pop</code>, <code>multiPop</code>} 操作，有 <span class="arithmatex">\(sizeof(S)\le n\)</span>。即使单次 <code>MultiPop</code> 可以是 <span class="arithmatex">\(O(sizeof(S))\)</span>，但无法连续执行 <span class="arithmatex">\(O(n)\)</span> 次，总复杂度不是 <span class="arithmatex">\(O(n^2)\)</span> 而是 <span class="arithmatex">\(O(n)\)</span>。每个被 push 的元素最多只能 pop 一次，所以</p>
<div class="arithmatex">\[T_{amortized}=O(n)/n=O(1)\]</div>
<details class="tip">
<summary>GPT 的解释</summary>
<p><strong>假设我们进行了一系列操作，包括多次 <code>push</code>、<code>pop</code> 和 <code>multipop</code> 操作。</strong></p>
<ul>
<li>每个 <code>push</code> 操作显然只需要 O(1) 的时间。</li>
<li>每个 <code>pop</code> 操作也需要 O(1) 的时间。</li>
<li>对于 <code>multipop(k)</code>，虽然它可能一次执行多次 <code>pop</code>，但重要的是，每个元素最多只能被弹出一次。因此，整个过程中无论是通过 <code>pop</code> 还是 <code>multipop</code> 弹出的元素，其数量最多为 n 次（即至多 n 个元素被压入栈并弹出）。</li>
</ul>
<p>因此，即使 <code>multipop(k)</code> 在某次操作中可能执行 k 次 <code>pop</code>，但所有 <code>pop</code> 操作（包括在 <code>multipop</code> 中的）总共不会超过 n 次。</p>
<p><strong>Aggregate Analysis 结论：</strong></p>
<ul>
<li>如果执行了 n 次操作（其中包括 <code>push</code>、<code>pop</code> 和 <code>multipop</code> 操作），那么总的时间复杂度是 <strong>O(n)</strong>。</li>
<li>于是每次操作的摊还复杂度是 O(1)。</li>
</ul>
</details>
<h3 id="32-accounting-method-核算法">3.2 Accounting method 核算法<a class="headerlink" href="#32-accounting-method-核算法" title="Locate to heading">#</a></h3>
<p>Amortized cost <span class="arithmatex">\(\hat c_i\)</span> 超过 actual cost <span class="arithmatex">\(c_i\)</span> 的操作，可以 pay for 其他 <span class="arithmatex">\(\hat c_i &lt; c_i\)</span> 的操作，要保证摊还费用能够支付实际费用</p>
<div class="arithmatex">\[
\begin{align}
\sum_{i=1}^n \hat c_i \ge&amp; \sum_{i=1}^n c_i \\ \\
T_{amoritzed}=&amp;\frac{\sum_{i=1}^n \hat c_i}{n}
\end{align}
\]</div>
<h4 id="321-eg-stack-with-multipop">3.2.1 e.g. Stack with <code>MultiPop</code><a class="headerlink" href="#321-eg-stack-with-multipop" title="Locate to heading">#</a></h4>
<p>在 push 时分配 <span class="arithmatex">\(\hat c_i=2\)</span> 来支付弹出时的花销，这样 pop 的摊还花销都是 <span class="arithmatex">\(\hat c_i=0\)</span>，满足了</p>
<div class="arithmatex">\[O(n)=\sum_{i=1}^n \hat c_i \ge \sum_{i=1}^n c_i\]</div>
<p>所以</p>
<div class="arithmatex">\[T_{amoritzed}=\frac{\sum_{i=1}^n \hat c_i}{n}=\frac{O(n)}{n}=O(1)\]</div>
<h3 id="33-potential-method-势能法">3.3 Potential method 势能法<a class="headerlink" href="#33-potential-method-势能法" title="Locate to heading">#</a></h3>
<h4 id="331-势能函数">3.3.1 势能函数<a class="headerlink" href="#331-势能函数" title="Locate to heading">#</a></h4>
<details class="tip">
<summary>势能函数的选择</summary>
<p>选择<strong>势能函数</strong>时，核心原则是确保势能函数能够准确反映数据结构状态的变化，并能够帮助解释操作的摊还代价。在不同的问题中，势能函数的选择方式会有所不同，但通常会遵循以下几个指导原则：</p>
<ol>
<li>
<p><strong>势能函数要与数据结构状态相关</strong>：
势能函数 <span class="arithmatex">\(\Phi\)</span> 通常是数据结构的某些属性的函数。它应该能够反映操作前后系统状态的变化。常见的选择包括：</p>
</li>
<li>
<p>数据结构中的元素数量。</p>
</li>
<li>
<p>数据结构的某种“复杂度”指标，如堆的高度、队列的长度等。</p>
</li>
<li>
<p><strong>势能函数的变化应能解释操作的代价</strong>：</p>
</li>
<li>当一个操作增加系统的复杂度时，势能应该相应增加，这意味着未来操作可能会减少这部分复杂度，势能可以用来支付高代价的操作。</li>
<li>
<p>当一个操作降低系统复杂度时，势能应该减少，表明之前存储的“潜在开销”可以被利用，来减少当前操作的成本。</p>
</li>
<li>
<p><strong>确保势能函数非负</strong>：
为了使势能法的分析合理，势能函数必须始终是非负的。初始状态下的势能通常设置为零，随着操作的进行，势能可能会增加或减少，但总是保持非负。</p>
</li>
<li>
<p><strong>势能的总变化不能超过实际的代价总和</strong>：
选择势能函数时要确保，整个操作序列中的势能变化不会比实际的操作代价增长得更快。也就是说，势能的增加不能过度夸大操作的摊还代价。</p>
</li>
</ol>
</details>
<div class="arithmatex">\[
\begin{align}
\hat c_i-c_i=&amp;Credit_i=\Phi(D_i)-\Phi(D_{i-1}) \\ \\
\sum_{i=1}^n\hat c_i=&amp;\sum_{i=1}^n(c_i+\Phi(D_i)-\Phi(D_{i-1}))=\sum_{i=1}^nc_i+\Phi(D_n)-\Phi(D_0)
\end{align}
\]</div>
<p>其中 <span class="arithmatex">\(\Phi(D_n)-\Phi(D_0)\ge 0\)</span></p>
<p>In general, a good potential function should always <strong>assume its minimum</strong> at the start of the sequence.</p>
<h4 id="332-eg-stack-with-multipop">3.3.2 e.g. Stack with <code>MultiPop</code><a class="headerlink" href="#332-eg-stack-with-multipop" title="Locate to heading">#</a></h4>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028012054460.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028012054460.webp" /></p>
<h4 id="333-splay-trees-t_amortizedolog-n">3.3.3 Splay Trees: <span class="arithmatex">\(T_{amortized}=O(\log N)\)</span><a class="headerlink" href="#333-splay-trees-t_amortizedolog-n" title="Locate to heading">#</a></h4>
<div class="arithmatex">\[\Phi(T)=\sum_{i \in T} \log S(i)\]</div>
<p>其中 <span class="arithmatex">\(S(i)\)</span> 表示以 <span class="arithmatex">\(i\)</span> 为根节点的子树中节点数之和，这样，当树更加平衡时，势能较小。</p>
<div class="admonition note">
<p class="admonition-title">考察三种 splay 操作的摊还花销：</p>
<p><strong>zig</strong></p>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028012110595.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028012110595.webp" /></p>
<ul>
<li><span class="arithmatex">\(c_i=1\)</span>，因为只有一次旋转</li>
<li>势能函数中只有 <code>X, P</code> 两个节点的 rank 发生了变化，且 <span class="arithmatex">\(R(P)\)</span> 变小所以可以放缩</li>
</ul>
<p><strong>zig-zag</strong></p>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028012152129.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028012152129.webp" /></p>
<ul>
<li><span class="arithmatex">\(c_i=2\)</span>，因为实际旋转 2 次</li>
<li>同理，由于 <span class="arithmatex">\(R(P)\)</span> 和 <span class="arithmatex">\(R(G)\)</span> 都变小，可以放缩</li>
<li>进一步 <code>X</code> 一定至少多了两个后代 <code>P, G</code>，所以 <span class="arithmatex">\(R_2(X)-R_1(X)\ge 2\)</span>，可以进一步放缩</li>
</ul>
<p><strong>zig-zig</strong></p>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028012217570.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028012217570.webp" /></p>
<ul>
<li><span class="arithmatex">\(c_i=2\)</span>，因为实际旋转 2 次</li>
<li>同理，<span class="arithmatex">\(R(G)\)</span> 一定减小，可以放缩掉</li>
<li><span class="arithmatex">\(R(P)\)</span> 的变化情况不确定，但一定有 <span class="arithmatex">\(R_2(P)-R_1(P)\le R_2(X)-R_1(X)\)</span></li>
<li>且同理有 <span class="arithmatex">\(R_2(X)-R_1(X)\ge 2\)</span></li>
</ul>
</div>
<p>综上，有 <span class="arithmatex">\(\hat c_i \le 1+3(R_2(X)-R_1(X))\)</span></p>
<p>The amortized time to splay a tree with root <span class="arithmatex">\(T\)</span> at node <span class="arithmatex">\(X\)</span> is at most <span class="arithmatex">\(3(R(T)-R(X))+1=O(\log N)\)</span></p>
<h2 id="4-questions">4 Questions<a class="headerlink" href="#4-questions" title="Locate to heading">#</a></h2>
<h3 id="41-hw1">4.1 HW1<a class="headerlink" href="#41-hw1" title="Locate to heading">#</a></h3>
<h4 id="411-给定-avl-树高求最小节点数">4.1.1 给定 AVL 树高，求最小节点数<a class="headerlink" href="#411-给定-avl-树高求最小节点数" title="Locate to heading">#</a></h4>
<p>If the depth of an AVL tree is 6 (the depth of an empty tree is defined to be -1), then the minimum possible number of nodes in this tree is:</p>
<details class="tip">
<summary>Answer</summary>
<p><span class="arithmatex">\(n_h=F_{h+3}-1\)</span> <strong>必记公式</strong></p>
</details>
<h4 id="412-熟练进行-splay">4.1.2 熟练进行 Splay<a class="headerlink" href="#412-熟练进行-splay" title="Locate to heading">#</a></h4>
<p><img alt="__assets/ADS 01 AVL Trees, Splay Trees and Amortized Analysis/IMG-ADS 01 AVL Trees, Splay Trees and Amortized Analysis-20241028012236711.webp" src="__assets/ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis/IMG-ADS%2001%20AVL%20Trees%2C%20Splay%20Trees%20and%20Amortized%20Analysis-20241028012236711.webp" /></p>
<p><strong>建议尝试一遍</strong></p>
<h4 id="413-选择合适的势能函数">4.1.3 选择合适的势能函数<a class="headerlink" href="#413-选择合适的势能函数" title="Locate to heading">#</a></h4>
<p>Consider the following buffer management problem. Initially the buffer size (the number of blocks) is one. Each block can accommodate exactly one item. As soon as a new item arrives, check if there is an available block. If yes, put the item into the block, induced a cost of one. Otherwise, the buffer size is doubled, and then the item is able to put into. Moreover, the old items have to be moved into the new buffer so it costs k+1 to make this insertion, where k is the number of old items. Clearly, if there are N items, the worst-case cost for one insertion can be Ω(N). To show that the average cost is O(1), let us turn to the amortized analysis. To simplify the problem, assume that the buffer is full after all the N items are placed. Which of the following potential functions works? <em>参考 <a href="https://zhoutimemachine.github.io/note/courses/ads-hw-review/#hw1">Homework - Jianjun Zhou's Notebook (zhoutimemachine.github.io)</a></em></p>
<ul>
<li>A. The number of items currently in the buffer</li>
<li>B. The opposite number of items currently in the buffer</li>
<li>C. The number of available blocks currently in the buffer</li>
<li><strong>D</strong>. The opposite number of available blocks in the buffer</li>
</ul>
<details class="tip">
<summary>Answer</summary>
<p><strong>D</strong></p>
<ul>
<li>设 <span class="arithmatex">\(size_i\)</span> 为第 <span class="arithmatex">\(i\)</span> 次插入前 buffer 的大小，则 <span class="arithmatex">\(\hat c_i=c_i+\Phi_i-\Phi_{i-1}\)</span>。如果插入前 buffer 没满，<span class="arithmatex">\(c_i=1\)</span>，否则 <span class="arithmatex">\(c_i=size_i\)</span></li>
<li>
<p>然后依次尝试每个选项，选择总是有 <span class="arithmatex">\(\hat c_i=O(1)\)</span> 的</p>
</li>
<li>
<p>使用排除法</p>
<ul>
<li>首先，插入的时候势能一定要分摊掉，简单插入的势能肯定增加，排除 B C</li>
<li>其次，在进行扩展的时候，势能一定能减少，来平均掉扩展的复杂度，A 势能 +1，D 才会减少，故选 D</li>
</ul>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Hint</p>
<p>直接套用势能函数到实际开销超过 O(1) 的操作上，然后检验是不是能摊还成 O(1)</p>
</div>
</details>
<h4 id="414-编程题avl-tree-插入实现">4.1.4 编程题：AVL Tree 插入实现<a class="headerlink" href="#414-编程题avl-tree-插入实现" title="Locate to heading">#</a></h4>
<div class="admonition warning">
<p class="admonition-title">Attention</p>
<ul>
<li>由于本章节课件没有代码实现，可以借鉴课本上的代码</li>
<li><strong>高度更新的时机</strong>十分重要</li>
</ul>
</div>
<p>实现 AVL tree 的插入，并输出根节点元素。<em>大部分代码源于课本，但修复了 bug</em></p>
<h3 id="42-ex1">4.2 Ex1<a class="headerlink" href="#42-ex1" title="Locate to heading">#</a></h3>
<h4 id="421-amortized-bounds-weakerstronger">4.2.1 Amortized bounds weaker/stronger?<a class="headerlink" href="#421-amortized-bounds-weakerstronger" title="Locate to heading">#</a></h4>
<p>Amortized bounds are weaker than the corresponding worst-case bounds, because there is no guarantee for any single operation. (T/F)</p>
<details class="tip">
<summary>Answer</summary>
<p><strong>T</strong> 记住 Worst <span class="arithmatex">\(\geq\)</span> Amortized <span class="arithmatex">\(\geq\)</span> Average 就好了，大的就是 stronger</p>
</details>
<h4 id="422-初始非零的势能函数">4.2.2 初始非零的势能函数<a class="headerlink" href="#422-初始非零的势能函数" title="Locate to heading">#</a></h4>
<p>Suppose we have a potential function <span class="arithmatex">\(\Phi\)</span> such that for all <span class="arithmatex">\(\Phi(D_{i})\geq \Phi(D_{0})\)</span> for all <span class="arithmatex">\(i\)</span>, but <span class="arithmatex">\(\Phi(D_{0})\neq 0\)</span>. Then there exists a potential <span class="arithmatex">\(\Phi'\)</span> such that <span class="arithmatex">\(\Phi'(D_{0})=0\)</span>, <span class="arithmatex">\(\Phi'(D_{i})\geq 0\)</span> for all <span class="arithmatex">\(i\geq 1\)</span>, and the amortized costs using <span class="arithmatex">\(\Phi'\)</span> are the same as the amortized costs using <span class="arithmatex">\(\Phi\)</span>. (T/F)</p>
<details class="tip">
<summary>Answer</summary>
<p><strong>T</strong>，势能函数的初始值可以不是 0，其实就是定义一个势能零点，而且问的是存在 exist</p>
</details>
<h4 id="423-avl-tree-高度和节点数关系">4.2.3 AVL Tree 高度和节点数关系<a class="headerlink" href="#423-avl-tree-高度和节点数关系" title="Locate to heading">#</a></h4>
<p>The height of an AVL tree of 30 nodes can be 5. (The height of an empty tree is defined to be -1). (T/F)</p>
<details class="tip">
<summary>Answer</summary>
<p><strong>T</strong> 根据公式直接求出高度为 5 的 AVL 的节点数范围，<span class="arithmatex">\([n_{5},2^{5+1}-1]=[F_{8}-1,63]=[20,63]\)</span></p>
</details>
<p>If there are 14 nodes in an AVL tree, then the maximum depth of the tree is ____. The depth of an empty tree is defined to be 0.</p>
<details class="tip">
<summary>Answer</summary>
<ul>
<li>这里要注意，空树的高度不是 -1 而是 0，也就是说根节点的高度是 1</li>
<li>根据 <span class="arithmatex">\(n_{h}=F_{h+3}-1\)</span> 得到最大的高度是 4，所以这里是 4+1=5</li>
</ul>
</details>
<h4 id="424-平衡树性质判断">4.2.4 平衡树性质判断<a class="headerlink" href="#424-平衡树性质判断" title="Locate to heading">#</a></h4>
<p>Among the following 6 statements about AVL trees and splay trees, how many of them are correct?</p>
<p>(1) AVL tree is a kind of height balanced tree. In a legal AVL tree, each node's balance factor can only be 0 or 1.</p>
<p>(2) Define a single-node tree's height to be 1. For an AVL tree of height h, there are at most <span class="arithmatex">\(2^h−1\)</span> nodes.</p>
<p>(3) Since AVL tree is strictly balanced, if the balance factor of any node changes, this node must be rotated.</p>
<p>(4) In a splay tree, if we only have to find a node without any more operation, it is acceptable that we don't push it to root and hence reduce the operation cost. Otherwise, we must push this node to the root position.</p>
<p>(5) In a splay tree, for any non-root node X, its parent P and grandparent G (guranteed to exist), the correct operation to splay X to G is to rotate X upward twice.</p>
<p>(6) Splaying roughly halves the depth of most nodes on the access path.</p>
<details class="tip">
<summary>Answer</summary>
<p><strong>2</strong> 应该只有 (2) (6) 正确，(4) 不对，即使只是查找也要进行 splay，这是 Splay Tree 的定义</p>
</details>
<h4 id="425-avl-tree-插入操作">4.2.5 AVL Tree 插入操作<a class="headerlink" href="#425-avl-tree-插入操作" title="Locate to heading">#</a></h4>
<p>Insert { 9, 8, 7, 2, 3, 5, 6, 4 } one by one into an initially empty AVL tree. How many of the following statements is/are FALSE?</p>
<ul>
<li>the total number of rotations made is 5 (Note: double rotation counts 2 and single rotation counts 1)</li>
<li>the expectation (round to 0.01) of access time is 2.75</li>
<li>there are 2 nodes with a balance factor of -1</li>
</ul>
<details class="tip">
<summary>Answer</summary>
<p><strong>0</strong> 所有都正确，第一个差点算错
建议开始画图之前先看看有没有选项是和过程相关的</p>
</details>
<h4 id="426-一些正误判断">4.2.6 一些正误判断<a class="headerlink" href="#426-一些正误判断" title="Locate to heading">#</a></h4>
<p>Which one of the following statements is FALSE?</p>
<ul>
<li>A. For red-black trees, the total cost of rebalancing for m consecutive insertions in a tree of n nodes is <span class="arithmatex">\(O(n+m)\)</span>.</li>
<li>B. To obtain <span class="arithmatex">\(O(1\)</span>) armortized time for the function <strong>decrease-key</strong>, the potential function used for Fibonacci heaps is <span class="arithmatex">\(\Phi(H)=t(H)+m(H)\)</span>, where <span class="arithmatex">\(t(H)\)</span> is the number of trees in the root list of heap <span class="arithmatex">\(H\)</span>, and <span class="arithmatex">\(m(H)\)</span> is the number of marked nodes in <span class="arithmatex">\(H\)</span>.</li>
<li>C. Let <span class="arithmatex">\(S(x)\)</span> be the number of descendants of <span class="arithmatex">\(x\)</span> (<span class="arithmatex">\(x\)</span> included). If the potential function used for splay tree is <span class="arithmatex">\(\Phi(T)=\sum_{x \in T}​\log S(x)\)</span> , then the amortized cost of one splay operation is <span class="arithmatex">\(O(\log n)\)</span>.</li>
<li>D. In the potential method, the amortized cost of an operation is equal to the actual cost plus the increase in potential due to this operation.</li>
</ul>
<details class="tip">
<summary>Answer</summary>
<p><strong>B</strong></p>
<ul>
<li>A. 旋转显然正确，染色的话每次染色都会增加一个黑色节点，不可能增加超过 <span class="arithmatex">\(O(m+n)\)</span> 个黑色节点</li>
<li>B. 斐波那契堆的势能函数通常是 <span class="arithmatex">\(\Phi(H)=t(H)+2m(H)\)</span></li>
<li>C. 根据笔记，这是正确的</li>
<li>D. 正确，是定义</li>
</ul>
</details>
<h3 id="43-midterm">4.3 Midterm<a class="headerlink" href="#43-midterm" title="Locate to heading">#</a></h3>
<h4 id="431-splay-tree-插入操作">4.3.1 Splay tree 插入操作<a class="headerlink" href="#431-splay-tree-插入操作" title="Locate to heading">#</a></h4>
<p>Insert {3,9,6,1,8,7} into an initially empty splay tree, 7 is the parent of 6. (T/F)</p>
<details class="tip">
<summary>Answer</summary>
<p><strong>T</strong>
Splay tree 插入操作，先按照 BST 插入，然后 splay 到根节点</p>
</details>







  
  






  <h2 id="__comments">Comments</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
          data-repo="EmergentTwilight/Emergent-Space"
          data-repo-id="R_kgDOMQFYhw"
          data-category="Announcements"
          data-category-id="DIC_kwDOMQFYh84Cmb5p"
          data-mapping="pathname"
          data-strict="0"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="top"
          data-theme="preferred_color_scheme"
          data-lang="zh-CN"
          crossorigin="anonymous"
          async>
  </script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Advanced Data Structure &amp; Algorithm Analysis">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Advanced Data Structure & Algorithm Analysis
              </div>
            </div>
          </a>
        
        
          
          <a href="ADS%2002%20Red-Black%20Trees%20and%20B%2B%20Trees.html" class="md-footer__link md-footer__link--next" aria-label="Next: 02 Red-Black Trees and B+ Trees">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                02 Red-Black Trees and B+ Trees
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024-2025 <a href="https://github.com/EmergentTwilight">EmergentTwilight</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/EmergentTwilight" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:emergentshores@outlook.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16v22.1l172.5 141.6c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16zM48 212.2V384c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0zM0 128c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "navigation.tracking", "navigation.tabs", "navigation.prune", "navigation.indexes", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../__srcs/javascript/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
        <script src="../__srcs/javascript/toc.js"></script>
      
    
  </body>
</html>